/**
 * promise-wtf
 * v1.0.0
 * built: Fri, 09 Sep 2016 05:59:07 GMT
 * git: https://github.com/ndaidong/promise-wtf
 * author: @ndaidong
 * License: MIT
**/
;(function(h,f){if("undefined"!==typeof module&&module.exports)module.exports=f();else{var b=window||{};b.define&&b.define.amd?b.define([],f):b.exports?b.exports=f():b[h]=f()}})("Promise",function(){var h="undefined"!==typeof module&&module.exports?"node":"browser",f=function(a){return a&&"[object Function]"==={}.toString.call(a)},b=function(a){var c=0,d=null,l,m=this,g=function(k){if(0===c)return d=k,!1;var a=2===c?k.onResolved:k.onRejected;return a?k.resolve(a(l)):2===c?k.resolve(l):k.reject(l)},
e=function(a){c=1;l=a;d&&g(d)},h=function(a){a&&f(a.then)?a.then(h,e):(c=2,l=a,d&&g(d))};m.then=function(a,c){return new b(function(b,d){return g({onResolved:a,onRejected:c,resolve:b,reject:d})})};m["catch"]=function(a){if(a&&f(a))return m.then(null,a)};return a(h,e)};b.resolve=function(a){return new b(function(c){return c(a)})};b.reject=function(a){return new b(function(c,b){return b(a)})};b.all=function(a){var c=[],d=b.resolve(null);a.forEach(function(a){d=d.then(function(){return a}).then(function(a){c.push(a)})});
return d.then(function(){return c})};var e=("node"===h?global:window).Promise||b;e.prototype["finally"]=function(a){return this.then(function(b){return e.resolve(a()).then(function(){return b})},function(b){return e.resolve(a()).then(function(){throw b;})})};e.series=function(a){return new e(function(b,d){var e=a.length,f=function(g){a[g](function(a){return a?d(a):g<e-1?f(g+1):b()})};return f(0)})};return e});